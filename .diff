diff --git a/src/gpt/__init__.py b/src/gpt/__init__.py new file mode 100644 index 0000000..e69de29 diff --git a/src/gpt/__main__.py b/src/gpt/__main__.py new file mode 100644 index 0000000..8fcb708 --- /dev/null +++ b/src/gpt/__main__.py @@ -0,0 +1,9 @@ +"""The GPT CLI entry point for python -m gpt""" +import sys + +from gpt_review._gpt_cli import cli + + +if __name__ == "__main__": + exit_code = cli() + sys.exit(exit_code) diff --git a/src/gpt_review/__init__.py b/src/gpt_review/__init__.py index 42c6a3d..60d8ab9 100644 --- a/src/gpt_review/__init__.py +++ b/src/gpt_review/__init__.py @@ -5,4 +5,19 @@ """Easy GPT CLI""" from __future__ import annotations +from knack.help_files import helps + __version__ = "0.5.0" + + +def _help_text(help_type, short_summary) -> str: + return f""" +type: {help_type} +short-summary: {short_summary} +""" + + +helps[""] = _help_text("group", "Easily interact with GPT APIs.") +helps["git"] = _help_text("group", "Use GPT enchanced git commands.") +helps["github"] = _help_text("group", "Use GPT with GitHub Repositories.") +helps["devops"] = _help_text("group", "Use GPT with Azure DevOps Repositories.") diff --git a/src/gpt_review/_devops.py b/src/gpt_review/_devops.py index 91f69f4..b6b63d3 100644 --- a/src/gpt_review/_devops.py +++ b/src/gpt_review/_devops.py @@ -113,7 +113,7 @@ class DevOpsCommandGroup(GPTCommandGroup): @staticmethod def load_command_table(loader: CLICommandsLoader) -> None: - with CommandGroup(loader, "devops", "gpt_review._devops#{}") as group: + with CommandGroup(loader, "devops", "gpt_review._devops#{}", is_preview=True) as group: group.command("review", "_devops_review", is_preview=True) @staticmethod diff --git a/src/gpt_review/_git.py b/src/gpt_review/_git.py index 6bb7159..802be3a 100644 --- a/src/gpt_review/_git.py +++ b/src/gpt_review/_git.py @@ -76,7 +76,7 @@ class GitCommandGroup(GPTCommandGroup): @staticmethod def load_command_table(loader: CLICommandsLoader) -> None: - with CommandGroup(loader, "git", "gpt_review._git#{}") as group: + with CommandGroup(loader, "git", "gpt_review._git#{}", is_preview=True) as group: group.command("commit", "_commit", is_preview=True) @staticmethod diff --git a/src/gpt_review/_github.py b/src/gpt_review/_github.py index 5788e17..483478b 100644 --- a/src/gpt_review/_github.py +++ b/src/gpt_review/_github.py @@ -137,7 +137,7 @@ class GitHubCommandGroup(GPTCommandGroup): @staticmethod def load_command_table(loader: CLICommandsLoader) -> None: - with CommandGroup(loader, "github", "gpt_review._github#{}") as group: + with CommandGroup(loader, "github", "gpt_review._github#{}", is_preview=True) as group: group.command("review", "_github_review", is_preview=True) @staticmethod diff --git a/src/gpt_review/main.py b/src/gpt_review/main.py index bd5d013..56a6764 100644 --- a/src/gpt_review/main.py +++ b/src/gpt_review/main.py @@ -1,22 +1,8 @@ """The GPT CLI entry point.""" import sys -from knack.help_files import helps - from gpt_review._gpt_cli import cli -def _help_text(help_type, short_summary) -> str: - return f""" -type: {help_type} -short-summary: {short_summary} -""" - - -helps[""] = _help_text("group", "Easily interact with GPT APIs.") -helps["git"] = _help_text("group", "Use GPT enchanced git commands.") -helps["github"] = _help_text("group", "Use GPT with GitHub Repositories.") - - exit_code = cli() sys.exit(exit_code)
